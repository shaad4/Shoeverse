{% extends "base.html" %}
{% block title %}My Profile - Shoeverse{% endblock %}

{% block content %}
<div class="flex">

    {% include "users/profile_sidebar.html" %}

    <!-- Main Content -->
    <main class="flex-1 p-10">
        <div class="max-w-3xl mx-auto">

            <!-- Page Title -->
            <h1 class="text-heading font-bold mb-6">Personal Info</h1>

            <!-- Profile Info Card -->
            <div class="bg-[#122117]/90 backdrop-blur-sm rounded-2xl p-10 text-center shadow-[0_8px_25px_rgba(0,0,0,0.5)] max-w-2xl mx-auto border border-[#264533]">
                <!-- Profile Image -->
                <div class="w-32 h-32 rounded-full overflow-hidden bg-input-bg mx-auto mb-4">
                    {% if user.profileImage %}
                        <img src="{{ user.profileImage.url }}" class="w-full h-full object-cover">
                    {% else %}
                        <img src="/static/images/alt_profile.png" class="w-full h-full object-cover opacity-50">
                    {% endif %}
                </div>

                <!-- Full Name -->
                {% if user.fullName %}
                    <h2 class="text-name font-bold">{{ user.fullName }}</h2>
                {% else %}
                    <h2 class="text-name font-bold text-muted opacity-50">Name not provided</h2>
                {% endif %}

                <!-- Email -->
                <p class="text-muted text-sm">{{ user.email }}</p>

                <!-- Other Details -->
                <div class="grid grid-cols-2 gap-6 text-left mt-6 text-sm">

                    <p>
                        <strong>Phone:</strong>
                        <span class="{% if not user.phoneNumber or user.phoneNumber == 'None' %}text-muted opacity-50{% endif %}">
                            {{ user.phoneNumber|default_if_none:"Not provided"|default:"Not provided" }}
                        </span>

                    </p>

                    <p>
                        <strong>Gender:</strong>
                        {% if user.gender %}
                            <span>{{ user.gender }}</span>
                        {% else %}
                            <span class="text-muted opacity-50">Not provided</span>
                        {% endif %}
                    </p>

                    <p>
                        <strong>Date of Birth:</strong>
                        {% if user.dateOfBirth %}
                            <span>{{ user.dateOfBirth }}</span>
                        {% else %}
                            <span class="text-muted opacity-50">Not provided</span>
                        {% endif %}
                    </p>
                </div>

            
               
                <!-- Edit Button -->
                <a href="{% url 'profile_edit' %}" 
                    class="inline-block bg-primary text-black font-semibold py-2 px-8 rounded-lg shadow-md 
                            hover:bg-[#2ECC71] hover:shadow-lg transition duration-200 transform hover:-translate-y-0.5">
                        Edit Profile
                </a>



            </div>

            <!-- Referral Section -->
            <div class="mt-8 bg-dark-green bg-referral-bg rounded-button p-5 shadow-md relative overflow-hidden">

                <!-- Decorative Image -->
                <div class="absolute right-6 top-2 bottom-2 flex items-center">
                    <img src="/static/images/referral-image.png" 
                         alt="Referral" class="h-28 object-contain opacity-90">
                </div>

                <!-- Referral Content -->
                <div class="relative z-10 max-w-sm">
                    <h3 class="font-bold text-white mb-4 text-lg">Referral Program</h3>

                    <!-- Referral Code Box -->
                    <div class="bg-white border border-gray-300 rounded-full p-3 flex items-center justify-between mb-3 shadow-sm">
                        <span id="referralCode" class="text-gray-900 font-medium tracking-wide">{{ user.referralCode }}</span>
                        <button onclick="copyReferralCode()" class="hover:opacity-80 transition-opacity">
                            <svg class="w-5 h-5 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                        </button>
                    </div>


                    <!-- Success message -->
                    <p id="copySuccess" class="text-green-400 text-xs hidden">Code copied!</p>

                    <!-- Description -->
                    <p class="text-xs text-white leading-6 mt-2">
                        Share this code with your friends and both of you will get â‚¹500 in your wallet!
                    </p>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Copy Script -->
<script>
function copyReferralCode() {
    const code = document.getElementById("referralCode").innerText;
    navigator.clipboard.writeText(code);
    document.getElementById("copySuccess").classList.remove("hidden");
    setTimeout(() => {
        document.getElementById("copySuccess").classList.add("hidden");
    }, 1500);
}
</script>
{% endblock %}
